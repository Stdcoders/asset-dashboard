Perfect ‚Äî this is a **core backend milestone** üëç
I‚Äôll show you **exactly how to build these APIs in Django REST Framework**, step-by-step, **using your existing `AssetsAssets` model**.

I‚Äôll assume:

* App name: `assets`
* Model: `AssetsAssets`
* Serializer: `AssetSerializer`
* Using **APIView** (simple + clear for learning)

---

# 1Ô∏è‚É£ Create / Update / Delete Asset APIs

## ‚úÖ Serializer (assets/serializers.py)

Make sure this exists first.

```python
from rest_framework import serializers
from .models import AssetsAssets

class AssetSerializer(serializers.ModelSerializer):
    class Meta:
        model = AssetsAssets
        fields = '__all__'
```

---

## ‚úÖ Create Asset API (POST)

```python
# assets/views.py
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from .models import AssetsAssets
from .serializers import AssetSerializer

class AssetCreateView(APIView):
    def post(self, request):
        serializer = AssetSerializer(data=request.data)
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
```

### URL

```python
path('assets/create/', AssetCreateView.as_view()),
```

---

## ‚úÖ Update Asset API (PUT / PATCH)

```python
class AssetUpdateView(APIView):
    def put(self, request, asset_id):
        try:
            asset = AssetsAssets.objects.get(asset_id=asset_id)
        except AssetsAssets.DoesNotExist:
            return Response({'error': 'Asset not found'}, status=404)

        serializer = AssetSerializer(asset, data=request.data)
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data)
        return Response(serializer.errors, status=400)
```

### URL

```python
path('assets/<int:asset_id>/update/', AssetUpdateView.as_view()),
```

---

## ‚úÖ Delete Asset API (Soft delete recommended)

Add field:

```python
is_active = models.BooleanField(default=True)
```

```python
class AssetDeleteView(APIView):
    def delete(self, request, asset_id):
        try:
            asset = AssetsAssets.objects.get(asset_id=asset_id)
        except AssetsAssets.DoesNotExist:
            return Response({'error': 'Asset not found'}, status=404)

        asset.is_active = False
        asset.save()
        return Response({'message': 'Asset deactivated'})
```

---

# 2Ô∏è‚É£ Assets Allocated API

```python
class AllocatedAssetsView(APIView):
    def get(self, request):
        assets = AssetsAssets.objects.filter(current_status='allocated')
        serializer = AssetSerializer(assets, many=True)
        return Response(serializer.data)
```

### URL

```python
path('assets/allocated/', AllocatedAssetsView.as_view()),
```

---

# 3Ô∏è‚É£ Assets by Location

This assumes **location is stored via allocation ‚Üí employee**
(Simple version using `place_zone` for now)

```python
class AssetsByLocationView(APIView):
    def get(self, request, location):
        assets = AssetsAssets.objects.filter(place_zone__iexact=location)
        serializer = AssetSerializer(assets, many=True)
        return Response(serializer.data)
```

### URL

```python
path('assets/location/<str:location>/', AssetsByLocationView.as_view()),
```

---

# 4Ô∏è‚É£ Filter by Brand & Model

```python
class AssetFilterView(APIView):
    def get(self, request):
        brand = request.GET.get('brand')
        model = request.GET.get('model')

        assets = AssetsAssets.objects.all()

        if brand:
            assets = assets.filter(brand__iexact=brand)
        if model:
            assets = assets.filter(model_name__icontains=model)

        serializer = AssetSerializer(assets, many=True)
        return Response(serializer.data)
```

### URL

```python
path('assets/filter/', AssetFilterView.as_view()),
```

### Example

```
/api/assets/filter/?brand=Dell&model=3420
```

---

# 5Ô∏è‚É£ Asset History API

Uses **allocation + service request tables**

```python
from .models import AssetsAllocations, AssetsServicerequest

class AssetHistoryView(APIView):
    def get(self, request, asset_id):
        allocations = AssetsAllocations.objects.filter(asset_id=asset_id)
        srs = AssetsServicerequest.objects.filter(
            current_asset_id=asset_id
        ) | AssetsServicerequest.objects.filter(
            replacement_asset_id=asset_id
        )

        return Response({
            'allocations': [
                {
                    'employee': a.employee.employee_name,
                    'date': a.allocated_date,
                    'status': a.status
                } for a in allocations
            ],
            'service_requests': [
                {
                    'sr_no': sr.sr_no,
                    'type': sr.sr_type,
                    'status': sr.status
                } for sr in srs
            ]
        })
```

### URL

```python
path('assets/<int:asset_id>/history/', AssetHistoryView.as_view()),
```

---

# 6Ô∏è‚É£ Warranty Expiring API

```python
from datetime import date, timedelta

class WarrantyExpiringView(APIView):
    def get(self, request):
        days = int(request.GET.get('days', 90))
        expiry_date = date.today() + timedelta(days=days)

        assets = AssetsAssets.objects.filter(
            warranty_end__lte=expiry_date
        )

        serializer = AssetSerializer(assets, many=True)
        return Response(serializer.data)
```

### URL

```python
path('assets/warranty/expiring/', WarrantyExpiringView.as_view()),
```

---

# ‚úÖ Final URL Summary (Assets)

```
GET    /api/assets/
POST   /api/assets/create/
PUT    /api/assets/{id}/update/
DELETE /api/assets/{id}/delete/

GET    /api/assets/allocated/
GET    /api/assets/location/{location}/
GET    /api/assets/filter/?brand=&model=
GET    /api/assets/{id}/history/
GET    /api/assets/warranty/expiring/?days=90
```

---

## üß† Why this is GOOD for an internship project

* Real workflows (allocation, warranty, replacement)
* Clean API separation
* Directly matches your Excel ‚Üí system migration story
* React frontend will consume these easily

---

Next step (recommended):
üëâ **Service Request APIs (create SR, approve SR, validate asset availability)**
Say *‚ÄúSR APIs next‚Äù* and we‚Äôll build them cleanly.
